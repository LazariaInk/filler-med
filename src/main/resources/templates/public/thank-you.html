<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ro">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>MulÈ›umim | Fillermed</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <style>
        .ty-page{ padding: 1.25rem 0 2rem; }
        .card{
          background: var(--card-bg);
          border: 1px solid #e5e7eb;
          box-shadow: 0 10px 30px rgba(15,23,42,.08);
          padding: 1.2rem;
          max-width: 820px;
          margin: 0 auto;
          text-align:center;
        }
        .card h1{ margin:0 0 .4rem; font-size:1.55rem; font-weight:900; }
        .muted{ color: var(--muted); line-height:1.55; margin:.35rem 0; }
        .pill{
          display:inline-flex;
          align-items:center;
          gap:.5rem;
          padding:.4rem .7rem;
          border:1px solid #e5e7eb;
          background:#f9fafb;
          font-weight:900;
          margin:.7rem 0 0;
        }
        .actions{
          display:flex;
          justify-content:center;
          gap:.6rem;
          flex-wrap:wrap;
          margin-top:1rem;
        }
        @media (max-width: 640px) {
  .logo-img {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }

  /* ascundem doar cÃ¢nd splash-ul e activ */
  body.has-splash .logo-img {
    opacity: 0;
    transform: translateY(-10px);
  }
}
    </style>
</head>
<body>

<div th:replace="~{public/fragments/layout :: siteHeader(${cart})}"></div>

<main class="ty-page">
    <div class="container">

        <div style="font-size:.85rem; color: var(--muted); margin: .25rem 0 1rem;">
            <a th:href="@{/}">AcasÄƒ</a> / <span>MulÈ›umim</span>
        </div>

        <div class="card">
            <h1>MulÈ›umim! ðŸŽ‰</h1>
            <p class="muted">
                Comanda ta a fost Ã®nregistratÄƒ cu succes.
            </p>

            <div class="pill">
                ID comandÄƒ: <span th:text="${orderId}">0</span>
            </div>

            <p class="muted" style="margin-top:.75rem;">
                Vei vedea statusul Ã®n admin: dacÄƒ este <b>plÄƒtitÄƒ</b> (Stripe) sau <b>cash la livrare</b> (COD).
            </p>

            <div class="actions">
                <a class="btn-view" th:href="@{/produse}" style="min-width:220px; text-align:center;">ÃŽnapoi la produse</a>
                <a class="btn-add-cart" th:href="@{/}" style="min-width:220px; text-align:center; display:inline-flex; justify-content:center;">
                    AcasÄƒ
                </a>
            </div>
        </div>

    </div>
</main>

<div th:replace="~{public/fragments/layout :: siteFooter}"></div>
<div th:replace="~{public/fragments/layout :: siteScripts}"></div>
<script>
    // Splash (O SINGURÄ‚ DATÄ‚)
    (function () {
        const splash = document.getElementById("splashScreen");
        const headerLogo = document.querySelector(".logo-img");
        if (!splash) return;

        const isMobile = window.innerWidth <= 640;

        if (!isMobile) {
            splash.classList.add("splash--hidden");
            document.body.classList.remove("has-splash");
            return;
        }

        document.body.classList.add("has-splash");

        const totalSplashTime = 3200;

        setTimeout(() => {
            splash.classList.add("splash--fade-out");

            if (headerLogo) {
                headerLogo.style.opacity = "1";
                headerLogo.style.transform = "translateY(0)";
            }

            setTimeout(() => {
                splash.classList.add("splash--hidden");
                document.body.classList.remove("has-splash");
            }, 600);
        }, totalSplashTime);
    })();

    // Carousel produse noi (O SINGURÄ‚ DATÄ‚)
    (function () {
        const track = document.getElementById("newProductsTrack");
        if (!track) return;

        const cards = track.querySelectorAll(".new-product-card");
        const prevBtn = document.getElementById("prevNewProducts");
        const nextBtn = document.getElementById("nextNewProducts");
        if (!prevBtn || !nextBtn || cards.length === 0) return;

        const visibleCardsDesktop = 4;
        let index = 0;

        function getVisibleCards() {
            if (window.innerWidth <= 640) return 1;
            if (window.innerWidth <= 900) return 2;
            return visibleCardsDesktop;
        }

        function updateCarousel() {
            const visible = getVisibleCards();
            const maxIndex = Math.max(0, cards.length - visible);
            if (index > maxIndex) index = maxIndex;
            const translatePercent = (100 / visible) * index;
            track.style.transform = `translateX(-${translatePercent}%)`;
        }

        prevBtn.addEventListener("click", () => {
            const visible = getVisibleCards();
            index = Math.max(0, index - visible);
            updateCarousel();
        });

        nextBtn.addEventListener("click", () => {
            const visible = getVisibleCards();
            index = Math.min(cards.length - visible, index + visible);
            updateCarousel();
        });

        window.addEventListener("resize", updateCarousel);
        updateCarousel();
    })();

    // Burger menu (O SINGURÄ‚ DATÄ‚)
    (function () {
        const burger = document.getElementById("burgerBtn");
        const headerNav = document.querySelector(".header-bottom");
        if (!burger || !headerNav) return;

        burger.addEventListener("click", () => {
            const isOpen = headerNav.classList.toggle("is-open");
            burger.classList.toggle("is-open", isOpen);
            document.body.classList.toggle("nav-open", isOpen);
        });

        window.addEventListener("resize", () => {
            if (window.innerWidth > 640 && headerNav.classList.contains("is-open")) {
                headerNav.classList.remove("is-open");
                burger.classList.remove("is-open");
                document.body.classList.remove("nav-open");
            }
        });
    })();
</script>

</body>
</html>
